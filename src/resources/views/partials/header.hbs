<nav class="navbar navbar-light header-shop d-block">
  <div class="d-flex justify-content-between">
    <a class="navbar-brand" href="#">
      <img src="/img/header_icon.jfif" width="50" height="50" class="d-inline-block align-top" alt="">
      <div class="d-inline-block text-light h2 m-1">
        <h2 class="d-inline-block" style="color:#cbbde2;">HLShop </h2>
      </div>
    </a>
    <form class="form-inline">
      <input class="form-control mr-sm-2" type="search" style="width:500px;" placeholder="Nhập từ khóa để tìm kiếm"
        aria-label="Search">
      <button class="btn btn-info" type="submit">Tìm Kiếm</button>
    </form>
    <div class="ml-auto" style="margin-right:20px">
      <div class="d-inline-block">
          <span class="oi oi-cart icon-cart">
          </span>
        <span class="badge badge-success" id="cart_item_count"
          style="font-size: 15px;margin-left: -10px;">0</span>
      </div>
      {{{loginable _isLoginForm}}}
    </div>
    <div class="btn-login-group">
      {{{loginHide _isLoginForm}}}
    </div>
  </div>
</nav>

{{!-- Modal Login --}}
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header border-bottom-0">
        <button type="button" class="close closeLogin" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-title text-center">
          <h4>ĐĂNG NHẬP</h4>
        </div>
        <div class="form-title text-center">
          {{#each errorLogin}}
          <h4 class="errorLogin m-4">{{this}}</h4>
          {{/each}}
        </div>
        <div class="d-flex flex-column">
          <form action="/login/checked" method="post">
            <div class="form-group">
              <label for="email1" style="font-size: 20px;">Email</label>
              <input type="text" class="form-control" id="email1" placeholder="Tên người dùng..." name="email" required>
            </div>
            <div class="form-group">
              <label for="password1" style="font-size: 20px;">Mật khẩu</label>
              <input type="password" class="form-control" id="password1" placeholder="Mật khẩu..." name="password"
                required>
            </div>
            <input type="submit" class="btn btn-info btn-block btn-round" value="ĐĂNG NHẬP">
          </form>
        </div>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <div class="signup-section" style="font-size: 20px;">Chưa có tài khoản? <a href="#a" class="text-info">Đăng
            ký</a></div>
      </div>
      <div class="d-flex justify-content-center social-buttons">
        <button type="button" class="btn btn-secondary btn-round" data-toggle="tooltip" data-placement="top"
          title="Facebook">
          <i class="ti-facebook"></i>
        </button>
        <button type="button" class="btn btn-secondary btn-round" data-toggle="tooltip" data-placement="top"
          title="Linkedin">
          <i class="ti-email"></i>
        </button>
      </div>
    </div>
  </div>
</div>

{{!-- Modal Register --}}
<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header border-bottom-0">
        <button type="button" class="close closeRegister" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-title text-center">
          <h4>ĐĂNG KÝ</h4>
        </div>
        <div class="form-title text-center">
          <h4 class="errorRegister"></h4>
        </div>
        <div class="d-flex flex-column">
          <form method="post" action="login/register" name="form-register">
            <div class="form-group">
              <label for="text" style="font-size: 20px;">Họ Tên</label>
              <input type="text" class="form-control nameRegister" id="text" placeholder="Họ và tên..." name="name" required>
            </div>
            <div class="form-group">
              <label for="phone" style="font-size: 20px;">Số điện thoại</label>
              <input type="text" class="form-control phoneRegister" id="phone" placeholder="Số điện thoại..." name="phone"
                required>
            </div>
            <div class="form-group">
              <label for="address" style="font-size: 20px;">Địa chỉ</label>
              <input type="text" class="form-control addressRegister" id="address" placeholder="Địa chỉ..." name="address"
                required>
            </div>
            <div class="form-group">
              <label for="email2" style="font-size: 20px;">Email</label>
              <input type="email" class="form-control emailRegister" id="email2" placeholder="Email..." name="email" required>
            </div>
            <div class="form-group">
              <label for="password2" style="font-size: 20px;">Mật khẩu</label>
              <input type="password" class="form-control password2" id="password2" placeholder="Mật khẩu..."
                name="password" required>
            </div>
            <div class="form-group">
              <label for="password3" style="font-size: 20px;">Xác nhận mật khẩu</label>
              <input type="password" class="form-control password3" id="password3" placeholder="Xác nhận mật khẩu..."
                name="confirm-password" required>
            </div>
            <input type="submit" class="btn btn-info btn-block btn-round btn-register" value="ĐĂNG KÝ"
              onclick="register()">
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{{#each errorLogin}}
<script>
  window.addEventListener("load", function () {
    $('#loginModal').modal('show');
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
  })
  document.forms['form-register'].action = 'register';
</script>
{{/each}}

{{#each erroCodeR}}
<script>
  window.addEventListener("load", function () {
    $('#registerModal').modal('show');
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
  })
  document.forms['form-register'].action = 'register';
</script>
{{/each}}

<script>
    $(document).ready(function () {
    $('#loginModal').modal('show');
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
  });
  $(document).ready(function () {
    $('#registerModal').modal('show');
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
  });
  function register(e) {
    var password = document.querySelector('.password2');
    var confirmPassword = document.querySelector('.password3');
    var registerForm = document.forms['form-register'];
    if (confirmPassword.value === password.value) {
      e.preventDefault();
      registerForm.action = 'login/register';
      registerForm.submit();
    }
    else {
      var error = document.querySelector('.error');
      error.textContent = "Mật khẩu và mật khẩu xác nhận không đúng";
      confirmPassword.value = "";
      password.value = "";
    }
  }
</script>

{{#each success}}
<script>
  window.addEventListener("load", function () {
    $('#loginModal').modal('show');
    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
    document.querySelector('.errorLogin').textContent = "{{this}}";
  })
  document.forms['form-register'].action = 'register';
</script>
{{/each}}

{{#each errorRegister}}
<script>
  document.querySelector('.errorRegister').textContent = "{{this}}";
</script>
{{/each}}

{{#each errorConstructor}}
<script>
  document.querySelector('.errorRegister').textContent = "{{this}}";
</script>
{{/each}}

{{#each name}}
<script>
  document.querySelector('.nameRegister').value = '{{this}}';
</script>
{{/each}}

{{#each phone}}
<script>
  document.querySelector('.phoneRegister').value = '{{this}}';
</script>
{{/each}}

{{#each address}}
<script>
  document.querySelector('.addressRegister').value = '{{this}}';
</script>
{{/each}}

{{#each email}}
<script>
  document.querySelector('.emailRegister').value = '{{this}}';
</script>
{{/each}}

{{#each error}}
<script>
  window.addEventListener("load", function () {
    document.querySelector('body').classList.add('modal-open');
    document.querySelector('.modal.fade').classList.add('show');
    document.querySelector('.modal.fade').removeAttribute('aria-hidden');
    document.querySelector('.modal.fade').style.display = 'block';
    document.querySelector('.modal.fade').style.paddingRight = '17px';
  })
  document.querySelector('.close').onclick = function () {
    document.querySelector('body').classList.remove('modal-open');
    document.querySelector('.modal.fade').classList.remove('show');
    document.querySelector('.modal.fade').setAttribute("aria-hidden", "true");
    document.querySelector('.modal.fade').style.display = 'none';
  }
</script>
{{/each}}